separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation") |>
filter(!is.n(violation))
hrd |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7))
hrd |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long")
hrd |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.n(violation_long))
hrd |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long))
hrd
hrd |>
mutate(initial_date = as.Date(initial_date)) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
)
hrd |>
mutate(initial_date = as.Date(initial_date)) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
initial_date,
violation
)
hrd |>
mutate(initial_date = as.Date(initial_date)) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
initial_date,
violation) |>
count(date)
hrd |>
mutate(initial_date = as.Date(initial_date)) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
initial_date,
violation) |>
count(initial_date)
hrd |>
mutate(initial_date = dmy(initial_date)) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
initial_date,
violation) |>
count(initial_date)
hrd |> glimpse()
hrd |>
count(initial_date)
hrd |>
count(date_added)
hrd |>
mutate(initial_date = dmy(initial_date)) |>
count(initi)
hrd |>
mutate(initial_date = dmy(initial_date)) |>
count(initial_date)
hrd |>
mutate(initial_date = ymd(initial_date)) |>
count(initial_date)
hrd |>
mutate(initial_date = parse_date(initial_date)) |>
count(initial_date)
hrd |>
mutate(initial_date = parse_date_time(initial_date)) |>
count(initial_date)
?parse_date_time
hrd |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long) & str_detect(initial_date, "2022")) |>
select(serial_number,
title,
initial_date,
violation) |>
count(initial_date)
hrd |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long) & str_detect(initial_date, "2023")) |>
select(serial_number,
title,
initial_date,
violation) |>
count(initial_date)
hrd |>
filter(str_detect(initial_date, "2023")) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
initial_date,
violation)
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
date_added,
violation)
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
date_added,
violation_long)
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
date_added,
violation_long) |>
write_csv(here("data", "hrd_chart.csv"))
hrd
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
select(serial_number,
title,
date_added,
violation_long) |>
write_csv(here("data", "hrd_violation_chart.csv"))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:7)) |>
filter(!is.na(hrd7))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:7)) |>
filter(!is.na(hrd6))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:7)) |>
filter(!is.na(hrd5))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:7)) |>
filter(!is.na(hrd4))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:4)) |>
filter(!is.na(hrd4))
pivot_longer(cols = hrd1:hrd7,
names_to = "ignore",
values_to = "hrd_long") |>
filter(!is.na(hrd_long)) |>
select(serial_number,
title,
date_added,
hrd_long)
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:4)) |>
pivot_longer(cols = hrd1:hrd7,
names_to = "ignore",
values_to = "hrd_long") |>
filter(!is.na(hrd_long)) |>
select(serial_number,
title,
date_added,
hrd_long) |>
write_csv(here("data", "hrd_chart.csv"))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:4)) |>
pivot_longer(cols = hrd1:hrd4,
names_to = "ignore",
values_to = "hrd_long") |>
filter(!is.na(hrd_long)) |>
select(serial_number,
title,
date_added,
hrd_long,
hrd)
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:4)) |>
pivot_longer(cols = hrd1:hrd4,
names_to = "ignore",
values_to = "hrd_long") |>
filter(!is.na(hrd_long)) |>
select(serial_number,
title,
date_added,
hrd_long) |>
write_csv(here("data", "hrd_chart.csv"))
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(!is.na(country_iso))
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(is.na(country_iso))
hrd
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(str_detect(date_added, "2023")) |>
group_by(country, country_iso) |>
summarise(count = n_distinct(serial_number))
hrd |> glimpse()
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(str_detect(date_added, "2023")) |>
group_by(country, country_iso) |>
summarise(count = n_distinct(serial_number),
impact_sum = sum(impact_of_the_event)) |>
write_csv(here("data", "hrd_map.csv"))
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(str_detect(date_added, "2023")) |>
group_by(country, country_iso) |>
summarise(count = n_distinct(serial_number),
impact_sum = sum(impact_of_the_event)) |>
write_csv(here("data", "hrd_map.csv"))
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(str_detect(date_added, "2023")) |>
group_by(country, country_iso) |>
summarise(count = n_distinct(serial_number),
impact_sum = sum(impact_of_event)) |>
write_csv(here("data", "hrd_map.csv"))
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(str_detect(date_added, "2023")) |>
group_by(country, country_iso) |>
summarise(count = n_distinct(serial_number),
impact_sum = sum(impact_of_event),
.groups = "drrop") |>
write_csv(here("data", "hrd_map.csv"))
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(str_detect(date_added, "2023")) |>
group_by(country, country_iso) |>
summarise(count = n_distinct(serial_number),
impact_sum = sum(impact_of_event),
.groups = "drop") |>
write_csv(here("data", "hrd_map.csv"))
hrd |> glimpse()
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(rights_concerned, sep = "\\|", remove = FALSE,
into = paste0("rights", 1:4)) |>
filter(!is.na(rights4))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(rights_concerned, sep = "\\|", remove = FALSE,
into = paste0("rights", 1:5)) |>
filter(!is.na(rights5))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(rights_concerned, sep = "\\|", remove = FALSE,
into = paste0("rights", 1:6)) |>
filter(!is.na(rights6))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(rights_concerned, sep = "\\|", remove = FALSE,
into = paste0("rights", 1:7)) |>
filter(!is.na(rights7))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(rights_concerned, sep = "\\|", remove = FALSE,
into = paste0("rights", 1:8)) |>
filter(!is.na(rights8))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(rights_concerned, sep = "\\|", remove = FALSE,
into = paste0("rights", 1:7)) |>
pivot_longer(cols = rights1:rights7,
names_to = "ignore",
values_to = "rights_long") |>
filter(!is.na(rights_long)) |>
select(serial_number,
title,
date_added,
event_description,
rights_long) |>
write_csv(here("data", "hrd_rights.csv"))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(rights_concerned, sep = "\\|", remove = FALSE,
into = paste0("rights", 1:7)) |>
pivot_longer(cols = rights1:rights7,
names_to = "ignore",
values_to = "rights_long") |>
filter(!is.na(rights_long)) |>
select(serial_number,
country,
title,
date_added,
event_description,
rights_long) |>
write_csv(here("data", "hrd_rights.csv"))
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(str_detect(date_added, "2023")) |>
group_by(country, country_iso) |>
summarise(count = n_distinct(serial_number),
impact_sum = sum(impact_of_event, na.rm = TRUE),
.groups = "drop") |>
filter(!is.na(impact_sum)) |>
write_csv(here("data", "hrd_text_and_map.csv"))
hrd |>
mutate(country_iso = countrycode(country,
origin = "country.name",
destination = "iso3c")) |>
filter(str_detect(date_added, "2023")) |>
summarise(n_distinct(serial_number))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:4)) |>
pivot_longer(cols = hrd1:hrd4,
names_to = "ignore",
values_to = "hrd_long") |>
filter(!is.na(hrd_long)) |>
group_by(hrd_long) |>
summarise(
event_count = n_distinct(serial_number),
total_impact = sum
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:4)) |>
pivot_longer(cols = hrd1:hrd4,
names_to = "ignore",
values_to = "hrd_long") |>
filter(!is.na(hrd_long)) |>
group_by(hrd_long) |>
summarise(
event_count = n_distinct(serial_number),
total_impact = sum(impact_of_event, na.rm = TRUE),
.groups = "drop")
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:4)) |>
pivot_longer(cols = hrd1:hrd4,
names_to = "ignore",
values_to = "hrd_long") |>
filter(!is.na(hrd_long)) |>
group_by(hrd_long) |>
summarise(
event_count = n_distinct(serial_number),
total_impact = sum(impact_of_event, na.rm = TRUE),
.groups = "drop") |>
write_csv(here("data", "hrd_victims_chart.csv"))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(hrd, sep = "\\|", remove = FALSE,
into = paste0("hrd", 1:4)) |>
pivot_longer(cols = hrd1:hrd4,
names_to = "ignore",
values_to = "hrd_long") |>
filter(!is.na(hrd_long)) |>
group_by(hrd_long) |>
summarise(
event_count = n_distinct(serial_number),
total_impact = sum(impact_of_event, na.rm = TRUE),
average_impact = mean(impact_of_event, na.rm = TRUE),
.groups = "drop") |>
write_csv(here("data", "hrd_victims_chart.csv"))
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(violation, sep = "\\|", remove = FALSE,
into = paste0("violation", 1:7)) |>
pivot_longer(cols = violation1:violation7,
names_to = "ignore",
values_to = "violation_long") |>
filter(!is.na(violation_long)) |>
group_by(violation_long) |>
summarise(event_count = n_distinct(serial_number),
average_impact = mean(impact_of_event, na.rm = TRUE),
.groups = "drop") |>
write_csv(here("data", "hrd_violation_chart.csv"))
hrd |>
filter(str_detect(date_added, "2023")) |>
filter(str_detect(rights_concerned, "Offline")) |>
sample_n(5) |>
pull(event_title  )
hrd |>
filter(str_detect(date_added, "2023")) |>
filter(str_detect(rights_concerned, "Offline")) |>
sample_n(5)
hrd |>
filter(str_detect(date_added, "2023")) |>
filter(str_detect(rights_concerned, "Offline")) |>
sample_n(5) |>
pull(title)
hrd |>
filter(str_detect(date_added, "2023")) |>
filter(str_detect(rights_concerned, "Offline")) |>
sample_n(5) |>
pull(rights_concerned)
hrd |>
filter(str_detect(date_added, "2023")) |>
separate(rights_concerned, sep = "\\|", remove = FALSE,
into = paste0("rights", 1:7)) |>
pivot_longer(cols = rights1:rights7,
names_to = "ignore",
values_to = "rights_long") |>
filter(!is.na(rights_long) &
rights_long %out% c("Offline", "Online")) |>
select(serial_number,
country,
title,
date_added,
event_description,
rights_long) |>
write_csv(here("data", "hrd_rights.csv"))
