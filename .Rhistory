filter(str_detect(cf_indicator_name, "6m")) |> count(cf_indicator_name)
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-ERV_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
count(cf_indicator_name)
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-ERV_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value)) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black"))
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-VaC_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black"))
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-VaC_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- 6 months from 2024/09")
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-VaC_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
theme_void() +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- 6 months from 2024/09")
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-VaC_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black"),
strip.text = element_text(face = "italic")) +
theme_void() +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- 6 months from 2024/09")
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-VaC_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black"),
strip.text = element_text(face = "italic", family = "sans")) +
theme_void() +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- 6 months from 2024/09")
theme_void() +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- 6 months",
subtitle = "From 2024-09")
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-VaC_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
theme_void() +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- 6 months",
subtitle = "From 2024-09")
forecasts |>
filter(
cf_indicator_name %in% c(
"ACLED-BASE-3m",
"CAST-Total_events-3m",
"CAST-ERV_events-3m",
"CFB-AnyViolence-3m",
"CFB-ViolenceIntensity-3m",
"ConfInt-BASE-3m",
"UCDP-BASE-3m",
"VIEWS-Main_fatalities-3m"
)
) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black"))
forecasts |>
filter(str_detect(cf_indicator_name, "6m") &
cf_indicator_name %out% c("CAST-VaC_events-6m",
"CAST-Battles_events-6m",
"AggregMetric-6m",
"AggregRank-6m")) |>
filter(iso != "IRN") |>
select(iso, country, indicator = cf_indicator_name, value = cf_indicator_value) |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- 6 months from 2024-09")
forecasts |> glimpse()
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg"))
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg")) |>
count(indicator)
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg")) |>
count(cf_indicator_name)
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
count(cf_indicator_name)
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_replace(indicator, "Aggreg", "Aggregate "),
indicator = fct_relevel(indicator,
c(
"Aggregate Metric-3m",
"Aggregate Metric-6m",
"Aggregate Metric-12m",
))) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_replace(indicator, "Aggreg", "Aggregate "),
indicator = fct_relevel(indicator,
c(
"Aggregate Metric-3m",
"Aggregate Metric-6m",
"Aggregate Metric-12m"
))) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 2) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_replace(indicator, "Aggreg", "Aggregate "),
indicator = fct_relevel(indicator,
c(
"Aggregate Metric-3m",
"Aggregate Metric-6m",
"Aggregate Metric-12m"
))) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 1) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_replace(indicator, "Aggreg", "Aggregate "),
indicator = fct_relevel(indicator,
c(
"Aggregate Metric-3m",
"Aggregate Metric-6m",
"Aggregate Metric-12m"
))) |>
arrange(indicator) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 1) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_replace(indicator, "Aggreg", "Aggregate "),
indicator = fct_relevel(indicator,
c(
"Aggregate Metric- 3m",
"Aggregate Metric- 6m",
"Aggregate Metric- 12m"
))) |>
arrange(indicator) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = str_replace(indicator, "ConfInt", "ConflictIntensity")) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 1) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_replace(indicator, "Aggreg", "Aggregate ")) |>
arrange(indicator) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value),
indicator = fct_relevel(indicator,
c(
"Aggregate Metric-3m",
"Aggregate Metric-6m",
"Aggregate Metric-12m"
))) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 1) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = fct_relevel(indicator,
c(
"AggregMetric-3m",
"AggregMetric-6m",
"AggregMetric-12m"
)),
indicator = str_replace(indicator, "Aggreg", "Aggregate ")) |>
arrange(indicator) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value)) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~indicator, nrow = 1) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_remove(indicator, "AggregMetric-"),
indicator = str_replace(indicator, "m", " months")) |>
arrange(indicator) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value)) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~fct_relevel(indicator,
c(
"AggregMetric-3m",
"AggregMetric-6m",
"AggregMetric-12m"
)), nrow = 1) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_remove(indicator, "AggregMetric-"),
indicator = str_replace(indicator, "m", " months")) |>
arrange(indicator) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value)) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~ indicator, nrow = 1) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
forecasts |>
filter(str_detect(cf_indicator_name, "Aggreg") &
!str_detect(cf_indicator_name, "Rank")) |>
rename(indicator = cf_indicator_name,
value = cf_indicator_value) |>
mutate(indicator = str_remove(indicator, "AggregMetric-"),
indicator = str_replace(indicator, "m", " months")) |>
arrange(indicator) |>
filter(iso != "IRN") |>
group_by(indicator) |>
mutate(range = range_wna(value)) |>
ungroup() |>
left_join(world_shape |> filter(iso3 %in% c("ISR", "JOR", "LBN", "PSE", "SYR")),
by = c("iso" = "iso3"),
relationship = "many-to-many") |>
st_as_sf() |>
ggplot() +
geom_sf(aes(fill = range)) +
facet_wrap(~ factor(indicator,
levels = c("3 months", "6 months", "12 months")), nrow = 1) +
scale_fill_viridis_c(option = "magma", direction = -1) +
theme(strip.background = element_rect(fill = "black")) +
labs(fill = "Normalised\nvalue",
title = "Conflict forecasts -- RAH Aggregates")
